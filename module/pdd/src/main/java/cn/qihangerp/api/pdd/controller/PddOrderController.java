package cn.qihangerp.api.pdd.controller;

import cn.qihangerp.api.pdd.domain.OmsPddGoods;
import cn.qihangerp.api.pdd.domain.OmsPddOrder;
import cn.qihangerp.api.pdd.service.OmsPddGoodsService;
import cn.qihangerp.api.pdd.service.OmsPddGoodsSkuService;
import cn.qihangerp.api.pdd.service.OmsPddOrderService;
import cn.qihangerp.common.PageQuery;
import cn.qihangerp.common.PageResult;
import cn.qihangerp.common.annotation.Log;
import cn.qihangerp.common.enums.BusinessType;
import cn.qihangerp.common.utils.poi.ExcelUtil;
import cn.qihangerp.core.controller.BaseController;
import cn.qihangerp.core.page.TableDataInfo;
import cn.qihangerp.domain.AjaxResult;
import jakarta.servlet.http.HttpServletResponse;
import lombok.AllArgsConstructor;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.web.bind.annotation.*;

import java.util.List;

/**
 * 拼多多订单Controller
 * 
 * @author qihang
 * @date 2024-01-02
 */
@AllArgsConstructor
@RestController
@RequestMapping("/pdd-api/order")
public class PddOrderController extends BaseController
{

    private final OmsPddOrderService orderService;
    @RequestMapping(value = "/list", method = RequestMethod.GET)
    public TableDataInfo orderList(OmsPddOrder bo, PageQuery pageQuery) {
        PageResult<OmsPddOrder> result = orderService.queryPageList(bo, pageQuery);

        return getDataTable(result);
    }
//    @Autowired
//    private IPddOrderService pddOrderService;
//
//    /**
//     * 查询拼多多订单列表
//     */
//    @PreAuthorize("@ss.hasPermi('pdd:order:list')")
//    @GetMapping("/list")
//    public TableDataInfo list(PddOrder pddOrder)
//    {
//        startPage();
//        List<PddOrder> list = pddOrderService.selectPddOrderList(pddOrder);
//        return getDataTable(list);
//    }
//
//    /**
//     * 导出拼多多订单列表
//     */
//    @PreAuthorize("@ss.hasPermi('pdd:order:export')")
//    @Log(title = "拼多多订单", businessType = BusinessType.EXPORT)
//    @PostMapping("/export")
//    public void export(HttpServletResponse response, PddOrder pddOrder)
//    {
//        List<PddOrder> list = pddOrderService.selectPddOrderList(pddOrder);
//        ExcelUtil<PddOrder> util = new ExcelUtil<PddOrder>(PddOrder.class);
//        util.exportExcel(response, list, "拼多多订单数据");
//    }
//
//    /**
//     * 获取拼多多订单详细信息
//     */
//    @PreAuthorize("@ss.hasPermi('pdd:order:query')")
//    @GetMapping(value = "/{id}")
//    public AjaxResult getInfo(@PathVariable("id") Long id)
//    {
//        return success(pddOrderService.selectPddOrderById(id));
//    }
//
//    /**
//     * 新增拼多多订单
//     */
//    @PreAuthorize("@ss.hasPermi('pdd:order:add')")
//    @Log(title = "拼多多订单", businessType = BusinessType.INSERT)
//    @PostMapping
//    public AjaxResult add(@RequestBody PddOrder pddOrder)
//    {
//        Integer result = pddOrderService.insertPddOrder(pddOrder);
//        if(result == -1) return new AjaxResult(505,"订单号已存在");
//        else if(result == -2) return new AjaxResult(506,"请添加商品");
//        else if(result == -3) return new AjaxResult(507,"商品数据错误");
//        return toAjax(result);
//    }
//
//    @Log(title = "拼多多订单", businessType = BusinessType.UPDATE)
//    @PostMapping("/confirm")
//    public AjaxResult confirmOrder(@RequestBody PddOrder pddOrder)
//    {
//        pddOrder.setUpdateBy(getUsername());
//        Integer result = pddOrderService.confirmOrder(pddOrder);
//        if(result == -1) return new AjaxResult(505,"订单不存在");
//        else if(result == -2) return new AjaxResult(506,"订单已确认过了");
//        else if(result == -3) return new AjaxResult(507,"订单售后中！无法操作！");
//        else if(result == -4) return new AjaxResult(508,"订单号确认过了！请检查订单号是否正确！");
//        else if(result == -5) return new AjaxResult(509,"不支持的发货方式！");
//        else if(result == -11) return new AjaxResult(511,"商品SKU编码不存在！");
//        else if(result == -12) return new AjaxResult(512,"商品信息不存在！");
//        return toAjax(result);
//    }
//

}
